---
import '../styles/global.css';

interface Props {
	title: string;
	description?: string;
}

const { title, description = "Uliboooo's Portfolio. Rust, CLI tools, and technical articles." } = Astro.props;
---

<!doctype html>
<html lang="ja">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content={description} />
		<meta name="google-site-verification" content="374ddqy1awIggKtvK0z3OX-8YC0gBes_NEFeZkTJX8Q" />
		<title>{title}</title>

		<link rel="shortcut icon" type="image/x-icon" href="/resource/favicon/favicon.ico" />

		<!-- Open Graph / Twitter -->
		<meta property="og:title" content={title} />
		<meta property="og:description" content={description} />
		<meta property="og:image" content="https://about.uliboooo.dev/resource/logo.webp" />
		<meta property="og:type" content="website" />
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:site" content="@uliboooo" />

		<script is:inline>
			// Theme Toggle Logic - Run immediately to prevent flash
			(function () {
				const savedTheme = localStorage.getItem('theme');
				const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
				if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
					document.documentElement.setAttribute('data-theme', 'dark');
				}
			})();
		</script>
	</head>
	<body>
		<slot />

		<footer>
			<p>&copy; 2025-2026 Uliboooo. All rights reserved.</p>
			<a href="https://github.com/Uliboooo/uliboooo.github.io" class="source-link">View Source</a>
		</footer>

		<script>
			// Theme Toggle Button Event Listener
			// This script runs on the client after the DOM is ready
			document.addEventListener('DOMContentLoaded', () => {
				const toggleButton = document.getElementById('theme-toggle');
				const htmlElement = document.documentElement;

				if (toggleButton) {
					const updateButtonText = () => {
						const isDark = htmlElement.getAttribute('data-theme') === 'dark';
						toggleButton.textContent = isDark ? 'Light' : 'Dark';
					};
					updateButtonText();

					toggleButton.addEventListener('click', () => {
						const currentTheme = htmlElement.getAttribute('data-theme');
						if (currentTheme === 'dark') {
							htmlElement.removeAttribute('data-theme');
							localStorage.setItem('theme', 'light');
						} else {
							htmlElement.setAttribute('data-theme', 'dark');
							localStorage.setItem('theme', 'dark');
						}
						updateButtonText();
					});
				}
			});
		</script>
	</body>
</html>
