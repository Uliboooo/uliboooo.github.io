:root {
  /* Default: Light Theme (Graphite Style) */
  --bg-color: #ffffff;
  --bg-card: #ffffff; /* Use white for card to make it pop with border/shadow */
  --bg-card-hover: #fcfcfc;
  --border-color: #cccccc; /* Darker border for clarity */

  --text-main: #1a1a1a;
  --text-muted: #4b4b4b;

  --accent-color: #000000;
  /* Darker accent for light mode */
  --gradient-start: #333;
  --gradient-end: #666;

  --header-bg: rgba(255, 255, 255, 0.95);
  --shadow-card: rgba(0, 0, 0, 0.1); /* More pronounced shadow */

  --font-main: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  --font-serif: "Georgia", "Times New Roman", Times, serif;
}

/* Dark Theme Variables */
[data-theme="dark"] {
  --bg-color: #0d0e12;
  --bg-card: #16181d;
  --bg-card-hover: #1e2026;
  --border-color: #2a2d35;

  --text-main: #ededed;
  --text-muted: #8a8f98;

  --accent-color: #5e6ad2;
  --gradient-start: #a371f7;
  --gradient-end: #5e6ad2;

  --header-bg: rgba(13, 14, 18, 0.9);
  --shadow-card: rgba(0, 0, 0, 0.3);
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: var(--font-main);
  background-color: var(--bg-color);
  color: var(--text-main);
  line-height: 1.6;
  -webkit-font-smoothing: antialiased;
  transition: background-color 0.3s, color 0.3s;
}

a {
  text-decoration: none;
  color: inherit;
  transition: color 0.2s;
}

a:hover {
  color: var(--accent-color);
  text-decoration: underline;
}

[data-theme="dark"] a:hover {
  color: #8ab4f8;
  text-decoration: none;
}

/* Header & Navbar */
.navbar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1.5rem 2rem;
  max-width: 1200px;
  margin: 0 auto;
  position: sticky;
  top: 0;
  background-color: var(--header-bg);
  backdrop-filter: blur(10px);
  z-index: 100;
  border-bottom: 1px solid transparent;
}

/* Optional: Add a subtle border to header in light mode for separation */
:root:not([data-theme="dark"]) .navbar {
  border-bottom: 1px solid var(--border-color);
}

.navbar .logo {
  display: flex;
  align-items: center;
  gap: 10px;
  font-weight: 700;
  font-size: 1.5rem;
  font-family: var(--font-serif);
  color: var(--text-main);
  text-decoration: none; /* Ensure no underline initially */
}

.navbar .logo:hover {
  text-decoration: none; /* No underline on hover for logo */
  color: var(--text-main); /* Keep original color */
}

.tab-nav {
  display: flex;
  gap: 2rem;
}

.tab-btn {
  background: transparent;
  border: none;
  color: var(--text-muted);
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  padding: 0.5rem 0;
  position: relative;
  transition: color 0.2s;
  font-family: var(--font-main);
}

.tab-btn:hover {
  color: var(--text-main);
}

.tab-btn.active {
  color: var(--text-main);
}

/* Active underline animation */
.tab-btn::after {
  content: '';
  position: absolute;
  bottom: -2px;
  left: 0;
  width: 100%;
  height: 2px;
  background: #444444;
  transform: scaleX(0);
  transform-origin: right;
  transition: transform 0.3s ease;
}

.tab-btn.active::after {
  transform: scaleX(1);
  transform-origin: left;
}


.header-right {
  display: flex;
  align-items: center;
  gap: 20px;
}

.social-links {
  display: flex;
  gap: 15px;
  align-items: center;
}

.social-links img {
  width: 20px;
  height: 20px;
  transition: opacity 0.2s;
  /* Default: Dark text/icons in light mode, assume SVGs are black or colored */
}

/* In Dark Mode, invert black icons to white. */
[data-theme="dark"] .social-links img:not(.no-invert) {
  filter: invert(1);
}

/* Ensure colored icons (Zenn) are NOT inverted even in dark mode if they are already visible, 
   or handle specifically. Zenn logo is Blue on transparent. 
   Blue shows up okay on dark gray. 
*/
.social-links img.no-invert {
  filter: none !important;
}

[data-theme="dark"] .social-links img[alt="Note"] {
  background-color: #ffffff;
  border-radius: 2px;
}


.social-links a:hover {
  opacity: 0.7;
  text-decoration: none;
}

/* Theme Toggle Button */
.theme-btn {
  background: transparent;
  border: 1px solid var(--border-color);
  color: var(--text-main);
  padding: 0.4rem 0.8rem;
  border-radius: 6px;
  cursor: pointer;
  font-size: 0.9rem;
  transition: all 0.2s;
}

.theme-btn:hover {
  background: var(--bg-card-hover);
}


/* Main Content Area */
.container {
  max-width: 1000px;
  margin: 3rem auto;
  /* Added top margin since hero is gone */
  padding: 0 1rem 4rem;
  min-height: 60vh;
}

.tab-pane {
  display: none;
}

.tab-pane.active {
  display: block;
}

/* Cards & Grid */
.grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 1.5rem;
}

.card {
  background-color: var(--bg-card);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  /* Slightly sharper corners like Graphite */
  padding: 1.5rem;
  box-shadow: 0 2px 4px var(--shadow-card);
}

.card:hover {
  background-color: var(--bg-card-hover);
}

.card h3 {
  font-size: 1.25rem;
  margin-bottom: 0.75rem;
  color: var(--text-main);
  font-family: var(--font-serif);
  /* Serif headings for cards too? Maybe. */
  font-weight: 600;
}

.card p {
  font-size: 0.95rem;
  color: var(--text-muted);
}

/* Repo Card Specifics */
.repo-card h3 {
  margin-bottom: 0.5rem;
}

.repo-card .links {
  margin-bottom: 1rem;
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.repo-card .links a {
  font-size: 0.8rem;
  padding: 4px 8px;
  background: rgba(0, 0, 0, 0.05);
  color: inherit;
  border: 2px solid #00a497; /* Wide teal border */
  border-radius: 4px;
  text-decoration: none;
}

.repo-card .links a:hover {
  background: rgba(0, 0, 0, 0.1);
  text-decoration: none;
}

[data-theme="dark"] .repo-card .links a {
  background: rgba(255, 255, 255, 0.1);
  color: inherit;
}

[data-theme="dark"] .repo-card .links a:hover {
  background: rgba(255, 255, 255, 0.2);
}

[data-theme="dark"] .repo-card .links a {
  background: rgba(255, 255, 255, 0.1);
}

.repo-card .links a:hover {
  background: rgba(0, 0, 0, 0.1);
}

[data-theme="dark"] .repo-card .links a:hover {
  background: rgba(255, 255, 255, 0.2);
}

/* Article List */
.list {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.article-card {
  display: block;
  /* Make the whole card clickable */
  cursor: pointer;
}

.article-card:hover {
  text-decoration: none;
}

.article-card .tag {
  display: inline-block;
  font-size: 0.75rem;
  padding: 2px 8px;
  border-radius: 4px;
  margin-bottom: 0.5rem;
  font-weight: 600;
}

.article-card .tag.zenn {
  background-color: rgba(62, 168, 255, 0.1);
  color: #3ea8ff;
}

.article-card .tag.note {
  background-color: rgba(44, 182, 150, 0.1);
  color: #2cb696;
}

/* About & Empty States */
.about-card {
  max-width: 800px;
  margin: 0 auto 2rem auto;
  padding: 2rem;
}

.about-card:last-child {
  margin-bottom: 0;
}

.about-card h2 {
  font-size: 2.5rem;
  margin-bottom: 1.5rem;
  color: var(--text-main);
  font-family: var(--font-serif);
}

.about-card h3 {
  margin-top: 2rem;
}

blockquote {
  border-left: 4px solid var(--border-color);
  margin: 1.5rem 0;
  color: var(--text-muted);
  font-style: italic;
  background: rgba(0, 0, 0, 0.02);
  padding: 1rem;
  border-radius: 0 4px 4px 0;
}

blockquote cite {
  display: block;
  margin-top: 0.5rem;
  font-size: 0.85rem;
  font-style: normal;
  text-align: right;
}

blockquote cite a {
  color: var(--accent-color);
  text-decoration: underline;
}

[data-theme="dark"] blockquote {
  background: rgba(255, 255, 255, 0.05);
}

.empty-state {
  text-align: center;
  padding: 3rem;
  border-style: dashed;
}

/* Footer */
footer {
  text-align: center;
  padding: 3rem 1rem;
  color: var(--text-muted);
  font-size: 0.9rem;
  border-top: 1px solid var(--border-color);
  margin-top: auto;
}

.source-link {
  display: inline-block;
  margin-top: 0.5rem;
  font-size: 0.8rem;
  text-decoration: underline;
  color: var(--text-muted);
}

.source-link:hover {
  color: var(--text-main);
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .navbar {
    flex-direction: column;
    gap: 1rem;
    padding: 1rem;
  }

  .tab-nav {
    width: 100%;
    justify-content: center;
    gap: 1rem;
  }

  .header-right {
    width: 100%;
    justify-content: center;
    margin-top: 0.5rem;
  }

  .grid {
    grid-template-columns: 1fr;
  }
}

/* Footnotes */
.footnotes-sep {
  margin-top: 3rem;
  border-top: 1px solid var(--border-color);
  opacity: 0.5;
}

.footnotes {
  margin-top: 1rem;
  font-size: 0.85rem; /* Slightly smaller */
  color: var(--text-muted);
  line-height: 1.1; /* Very tight line height */
}

.footnotes ol {
  margin-left: 1.5rem;
  margin-bottom: 0; /* Remove bottom margin from list */
}

.footnotes li {
  margin-bottom: 0.1rem; /* Minimal spacing */
}

.footnote-ref {
  text-decoration: none;
  margin-left: 2px;
  color: var(--accent-color);
  font-size: 0.8em;
  vertical-align: super;
}

.footnote-backref {
  margin-left: 4px;
  text-decoration: none;
  color: var(--accent-color);
}

/* Blog Specific Styles */
.blog-container {
  max-width: 800px;
  margin: 0 auto;
  padding: 2rem 1rem;
}

.blog-header {
  margin-bottom: 3rem; /* Increased spacing after header */
  border-bottom: 1px solid var(--border-color);
  padding-bottom: 1.5rem;
}

.blog-header h1 {
  font-size: 2.5rem;
  color: var(--text-main);
  margin-bottom: 0.75rem;
}

.blog-meta {
  color: var(--text-muted);
  font-size: 0.95rem;
}

#blog-content {
  line-height: 1.9; /* More breathing room for text lines */
  color: var(--text-main);
}

#blog-content h2 {
  margin-top: 2.8rem; /* Reduced from 4rem */
  margin-bottom: 1.5rem;
  padding-bottom: 0.5rem;
  border-bottom: 1px solid var(--border-color);
}

#blog-content h3 {
  margin-top: 2rem; /* Reduced from 3rem */
  margin-bottom: 1.2rem;
}

#blog-content p {
  margin-bottom: 2.2rem; /* Clearly distinguish paragraphs from simple line breaks */
}

#blog-content pre {
  background: #f4f4f4;
  padding: 1.2rem;
  border-radius: 8px;
  overflow-x: auto;
  margin-bottom: 2.2rem;
}

[data-theme="dark"] #blog-content pre {
  background: #1e1e1e;
}

#blog-content code {
  font-family: monospace;
  background: rgba(0, 0, 0, 0.05);
  padding: 0.2rem 0.4rem;
  border-radius: 4px;
}

[data-theme="dark"] #blog-content code {
  background: rgba(255, 255, 255, 0.1);
}

#blog-content img {
  max-width: 100%;
  border-radius: 8px;
  margin: 2rem 0; /* Space around images */
}

#blog-content ul,
#blog-content ol {
  margin-left: 2.5rem;
  margin-bottom: 2.2rem;
}

#blog-content li {
  margin-bottom: 0.8rem;
}

.back-btn {
  display: inline-block;
  margin-bottom: 1.5rem;
  color: var(--text-muted);
  font-weight: 600;
}

.back-btn:hover {
  color: var(--accent-color);
}
